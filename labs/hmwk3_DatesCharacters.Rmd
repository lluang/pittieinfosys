---
title: 'Homework 3: Dates and strings'
author: "IE 0015 Information Systems"
date: "March 27, 2019"
output:
  html_document:
    df_print: paged
  pdf_document: default
---

```{r loadtitanic}
library(dplyr)
library(tidyr)
library(magrittr)
library(stringr)
library(lubridate)
library(ggplot2)
```

Read in the `beavers` data that is included in R as well as the help file (search for `beaver` in Help.  The data was taken in 1990 in Wisconsin. For both the `beaver1` and `beaver2` dataset, the `day` field is days since the beginning of 1990.  The `time` field is the digits from a 24 hour clock.

```{r}
data(beavers)
summary(beaver1)
summary(beaver2)
```

1. [4]  Working with dates.

a. For each dataset, calculate the date for each data record and store it in a new field. 
b. What dates are represented in each data file? (ideally, this should be within the data frame, but we will not take points off if this is a vector that corresponds to the dataset). (Hint:  add days using `lubridate` to December 31, 1989 because January 1, 1990 should be day 1)

2. [16] Look at the time stamps. 

    a. What makes this hard to work with? 
    b. Write out an algorithm (flow chart in pseudocode or a process map) that would converts the date and time into a single timestamp (hint: use .  
    c. Then code this in R.
    d. For both Beaver1 and Beaver2, plot the changes in temperature over time and compare the plots.

    
Note: `str_pad` from `stringr` puts leading characters in front of a character string to make it a given length.  e.g. make sure that east coast zip codes show the 0 as the first digit.

Note: `str_paste` will work with `lubridate` output to put the date and time together to form a timestamp.

Questions 3, 4, 5, 6, and 7 use the Titanic data set. Note: The data dictionary is in Courseweb -> Course Documents -> data.

```{r titanicdata}
titanic <- read.csv("../data/titanic3.csv")
```

3. [2]  In the Titanic data, 

a. Write the flowchart that identifies the people with the following characteristics: 
  -  Embarked in Queenstown
  -  Female
  -  Known to be under the age of 19 (i.e. 18 and under)
b.  Write and execute the R code that does this.

4. [8] In the Titanic data, plot a histogram of ages in 5 year increments (bins) separated by Sex (gender) include a meaningful plot title, and x and y axis labels. 

Notes: 

    -  Look at the help file for `geom_histogram`.  
    -  You must set the binwidth properly and show both genders to get full credit for this question.

5.  (8 pts) The Titanic accident was in a time when people were identified by their titles. In the Titanic data, How do you identify the title (Mr., Mrs., Miss. etc) of a person? Draw a process map for this procedure.

Hint: open the Titanic csv file in R Studio and tell someone else exactly how to identify the title without pointing to the file.

6.  (8 pts) Read in the titanic data and extract the title of each person.  Make a list of unique titles.  

- Note 1: Look in lecture Rmd file
- Note 2: How do you find the first letter? how do you know the title is complete? Note: The Countess is a special case, don't worry about getting her territory right, just her title.  
- Note 3:  in a regular expression, you need to escape the punctuation with a backslash, and you need to escape the backslash with another backslash (i.e. two backslashes before a punctuation mark.)
- Note 4:  to apply a function to a vector (e.g. a column in a dataframe) use `sapply`, e.g. `sapply(dataframe$column, FUN=sqrt)` or `mutate`  
  
7.  (4 pts) Write and execute R code to determine how many passengers have each title? (hint: declare the list of titles to be a factor and take the summary)
