---
title: "Reading data into databases"
author: "IE0015 Lab 1"
date: "January 11/12, 2018"
output:
  word_document: default
  pdf_document: default
---

Note: This lab should be done as a Word file so you can cut and paste MS Access output to answer questions as needed.  When a query is required, you may use the MS Access Query Wizard to design the query, then use the SQL View to display the resulting SQL that will go into your answer. 

1. [1] Download the Titanic data from Courseweb (My Documents -> Data Sets) and look at it using a text editor (Notepad or the R Studio editor). 

What character separates fields in this file?  What character identifies text that should be kept in the same data field?  What would happen if you did not identify text that should be kept together?


comma, "", the name would be broken into two columns.

2. [1]  Using the MS Access, import the Titanic data. How many rows and columns are in the resulting table?  

1309 rows, 14 columns. (15 if you added a primary key)  Can look at the bottom of the table to get the number of rows. You could count the number of columns by hand. 

Note: If you get 1310 that means you didn't select the first rows as field name. Remember to select first row as field name when you importing csv into database.


3. [1]  There are generally commas in the name and the home.dest field data.  Why did these not cause the data to be divided into two different columns.

The double quotes keep the text together.

4.  [2] Use the query wizard to create an SQL query to determine, from each port of embarkation, how many females (women and girls) were embarked.  This will involve creating a Crosstab where rows are the port of embarkation and columns are gender.

Your answer should include a table with the answer (note that you should name the cities, not only the initial) and the final SQL query that allowed you to answer the question.



Embarked | sex | 0 (peris) | 1 (survived)
---------|--------|------|--------------
Cherbourg | female | 11 | 102
Cherbourg | male | 109 | 48
Queenstown | female | 23 | 37
Queenstown | male | 56 | 7
Southampton | female | 93 | 198
Southampton | male | 517 | 106
(blank) | female | 0 | 2


```
TRANSFORM Count(Titanic3.ID) AS CountOfID
SELECT Titanic3.embarked, Titanic3.sex
FROM Titanic3
GROUP BY Titanic3.embarked, Titanic3.sex
PIVOT Titanic3.survived;

```

5. [1] Download and look at the data from the two American Community Survey (ACS) Pennsylvania tables using a text editor.  How are columns separated?  How is text that should not be separated identified? What column(s) should be guaranteed to be unique and can serve as a primary key?


comma, "", 

SERIALNO (for household record) Alternative PK_UID
 
SERIALNO and SPORDER (for person record, do not take off if they did not get SPORDER)



6. [*] Load both tables into MS Access.  What error messages did you see? (Note: we will do something about this in Lab 2)

The personal file does not load because it has more than 255 columns.  


7. [1] In the ACS Household Record, how many [1] Determine the fields which identify the number of people in the household, and the type of household ownership (Group Quarter (i.e. dorms, prisons, military barracks), Rental, Own) You will need to access the ACS Data Dictionary from the ACS website. (hint, search for the words in the categories you are looking for.)

ANSWERS

- TEN identifies type of ownership
- NP identifies people in household

8.  [2] Determine the number of people who live in Group Quarters/vacant, Rent, Own (with mortgage), own (no mortgage), or are not currently paying for housing.  Include query(ies), the resulting table, and the written value of the tenure.  Note that the table should use words to indicate tenure (the type of ownership) and not a number.

```
SELECT Ss16hpa.TEN, TEN.TEN, Sum(Ss16hpa.NP) AS People, Count(Ss16hpa.SERIALNO) AS Households
FROM Ss16hpa LEFT JOIN TEN ON Ss16hpa.TEN = TEN.ID
GROUP BY Ss16hpa.TEN, TEN.TEN;
```
Note: they may not have the GQ/Vacant (blank) row. Do not take off for that. I created a table called TEN that filled in the name of the tenure categories for me. It is not necessary for the assignment.

Tenure| TEN	| SumOfNP (people) | CountOfSERIALNO (households)
---|---|---|---
GQ/vacant | (blank)|	7446 |	12880
Owned with mortgage or loan (include home equity loans) | 1	| 60414	| 21846
Owned free and clear | 2	| 33343 |	16255
Rent | 3	| 24102	| 11614
Occupied without payment of rent | 4	| 1965 | 972

