---
title: "ComplexGraphsAnswers"
author: "Shi Tang"
date: "February 4, 2015"
output: pdf_document
---
```{r loadlibraries}
library(ggplot2)
library(dplyr)
```

```{r, echo = FALSE}
FemPreg <- read.csv("../data/2006_2010_FemPreg.csv",
                     header=TRUE,sep=",")
```

1. Read the National Survey of Family Growth Female Pregnancy dataset into R (either from CSV or SQLite). Clean the data and then use *facets* to add sex(1st of pregnancy) to the birthweight distribution by pregnancy order.
a. What are the variables that represent sex (1st child of pregnancy), the birth weight in pounds (1st child of pregnancy) and pregnancy order?
b. Since there are a few 9 and NA in sex, filter the data with the value of sex equals to 1 and 2. 
c. Define 1 as "Boy" and 2 as "Girl".
d. Use the new dataframe to plot the birthweight distribution by pregnancy order(using sex as faceting factor). 

**ANSWER**    
BABYSEX1 is the sex (of a first child born in the case of twins/triplets).     
BIRTHWGHT_LB1 is the birth weight (of a first child born in the case of twins/triplets).    
pregordr indicates birth order.    

```{r, echo = FALSE}
FemPreg1 <- filter(FemPreg, BABYSEX1 == 1 | BABYSEX1 == 2)
FemPreg1$BABYSEX1 <- replace(FemPreg1$BABYSEX1, FemPreg1$BABYSEX1 == "1",
                             "Boy") 
FemPreg1$BABYSEX1 <- replace(FemPreg1$BABYSEX1, FemPreg1$BABYSEX1 == "2",
                             "Girl") 
qplot(as.integer(pregordr), as.integer(BIRTHWGT_LB1), data = FemPreg1[FemPreg1$BIRTHWGT_LB1<99,], geom = "jitter", alpha = I(1/5), facets = BABYSEX1~., xlab="Pregnancy order", ylab = "Birthweight (lbs)", main = "Birthweight by pregnancy order")
```

2. Use colors or shapes to show multiple views of the data.  
a. Use race as *fill* to show the birthweight distribution.
b. Use race as *shape* to show the birthweight distribution by pregnancy order.
c.  Use race as *color* to show the density plot of pregnancy lengths.   

**ANSWER**

```{r, echo = FALSE}
qplot(as.integer(BIRTHWGT_LB1), data = FemPreg[FemPreg$BIRTHWGT_LB1<99,], geom = "bar", fill = as.factor(RACE), binwidth = 1, xlab = "Birthweight (lbs)", main = "Birthweight distribution")   
qplot(as.integer(pregordr), as.integer(BIRTHWGT_LB1), data = FemPreg[FemPreg$BIRTHWGT_LB1<99,], geom = c("jitter"), shape=as.factor(RACE), alpha = I(1/5), xlab="Pregnancy order", ylab = "Birthweight (lbs)",, main = "Birthweight by pregnancy order")
qplot(PRGLNGTH, data = FemPreg, geom = "density", colour = as.factor(RACE), xlab="Pregnancy length",main="Pregnancy lengths of live births")   
```
