---
title: 'Homework 2: Calculations and Power'
author: "IE 0015"
date: "February 13, 2018"
output:
  html_document: default
  pdf_document: default
---

For the homework assignments, code and narrative should be written using R Markdown.  Process maps can be written on separate pieces of paper. You should render the R Markdown as PDF or Word then submit the hardcopy.

This assignment builds on the discussion articles "What is Fitness?" and "What can exercise science learn from CrossFit?"  The purpose of those articles was to state in general terms a method of applying scientific principles to evaluating exercise and fitness.  In this homework assignment, you will operationalize the concepts in those articles 


```{r, warning=FALSE, message=FALSE}
library(tidyr)
library(dplyr)
library(magrittr)
library(ggplot2)
library(readxl)
library(readr)
```



1. Load the affiliate and the two CrossFit Open files based on the following rule:

-  Use the first letter of your last name. 
-  If you are in a team of two, use the last name of the person whose first name comes first alphabetically to determine men or women, use the first name of the person whose last name comes first for 2017 or 2018.

Last (family) name:  A-L: Men,  M-Z: Women
First (given) name:  A-L: 2017, M-Z: 2018


```{r}
Affiliate_list <- read_csv("../data/Affiliate_list.csv",
col_types = cols(Affiliate_id = col_character()))
Men_Rx_2017 <- read_csv("../data/Men_Rx_2017.csv",
col_types = cols(Affiliateid = col_character(),
Userid = col_character()))
#Men_Rx_2018 <- read_csv("../data/Men_Rx_2018.csv",
#col_types = cols(Affiliate_id = col_character(),
#User_id = col_character()))
#Women_Rx_2017 <- read_csv("../data/Women_Rx_2017.csv",
#col_types = cols(Affiliateid = col_character(),
#Userid = col_character()))
Women_Rx_2018 <- read_csv("../data/Women_Rx_2018.csv",
col_types = cols(Affiliate_id = col_character(),
User_id = col_character()))
# Note data set is large, you may want to do your work on a sample of the data.  
# Comment out when you are done so done working
Men_Rx_2017 <- Men_Rx_2017 %>% sample_frac(0.1)
#Men_Rx_2018 <- Men_Rx_2018 %>% sample_frac(0.1)
#Women_Rx_2017 <- Women_Rx_2017 %>% sample_frac(0.1)
Women_Rx_2018 <- Women_Rx_2018 %>% sample_frac(0.1)

```

The code below converts scores that are written in the format "0 days HH:MM:SS" into seconds.  Apply this to each column as needed.  See examples of use as needed.
```{r texttoseconds, warning=FALSE}
library(stringr)
texttoseconds <- function(textstring){
  if(is.na(as.integer(textstring))){
    seconds <- as.numeric(substr(textstring, 11, 12)) * 60 + as.numeric(substr(textstring, 14, 15))
  }else{
    seconds = as.numeric(textstring)
  }
  return(seconds)
}

Men_Rx_2017$`17_1_seconds` <- sapply(Men_Rx_2017$`17.1_score`,texttoseconds)
Men_Rx_2017$`17_3_seconds` <- sapply(Men_Rx_2017$`17.3_score`,texttoseconds)
Men_Rx_2017$`17_5_seconds` <- sapply(Men_Rx_2017$`17.5_score`,texttoseconds)
#Women_Rx_2017$`17_1_seconds` <- sapply(Women_Rx_2017$`17.1_score`,texttoseconds)
#Men_Rx_2018$`18_2_seconds` <- sapply(Men_Rx_2018$`18.2_score`,texttoseconds)
Women_Rx_2018$`18_2_seconds` <- sapply(Women_Rx_2018$`18.2_score`,texttoseconds)

```

2. [3] Look up (search using the internet) the workouts that comprise the 2017 and 2018 CrossFit Opens (best place is games.crossfit.com).  In this assignment, you will need to calculate power output.  This requires being able to measure distance traveled.  You are only interested in vertical distance traveled in your calculations of power.  Measure the distances while standing.  Assign the results to variables. 

For each workout in the year you are assigned, identify the body part (joint to joint) that would be an approximate measure of the vertical distance covered by each repetition of the movement, (for whole body movements from ground to standing, use the height from ground to your waist), measure that distance for two people (if you have two people doing the homework together, the two of you. Otherwise, find someone else in the class you can share measurements with), and average that distance.  Also estimate and average the weights for each person.  Assume that a persons weight is split evenly at the waist (top half and bottom half).

Ignore cardio components (run, row, ski, double-unders) and $N$ rep max components.


    i. Identifies the workout.
    ii.  Identifies a movement within the workout
    iii. States the vertical distance traveled for each iteration (repetition) of the movement (Note: Horizontal distance without up-down movement does not count!)
    iv. States the mass/weight moved for that movement.
    v. Identifies the number of repetitions of that movement in each round of the workout.

Note: A similar exercise is also done in IE 1061 Human factors

Note: You should start by recording your measurements as variables, then assign those values to the distance traveled as appropriate.  The values are expected to be approximate (i.e. do not be to concerned with precise definitions on body measurements. You will learn how to be precise in IE 1061.)

Note: You should make a decision if you are going to use metric or Imperial/U.S. Customary  units, and convert measurements accordingly.

```
{r} #move this line to after the tick marks to create a code chunk
# enter measurements and any calculations needed here
# Use comments to indicate units
groundtowaist <- 
groundtoknee <- 
kneetowaist <- 
groundtoshoulder <- 
handtoshoulder <- 
chesttohand <- 
groundtohand <- 
elbowtoshoulder <-
waisttohand <-
bodyweight <- 
```

3. [2] Average power over time.

    a.  Draw a flow chart that calculates average power over time given mass, distance, and time. Each box should be a specific arithmetic operation.
    b.  Write a function for each workout that calculates average power over time given weight, distance and time. Ignore all cardio (run, walk, row, bike, ski, double-unders, handstand walk, etc.) You may look up *work* and *power* in Wikipedia to see the mathematical definitions for both. (you will use this later, so design the function and its parameters accordingly) (Note: writing functions is covered in the readings from https://swcarpentry.github.io/r-novice-inflammation/)

Note that pounds is a unit of force.  Kilograms is a unit of mass. So mass needs to be multiplied by gravity to get force (Newtons) if you are using kilograms.


## 2017 Crossfit Open

### 17.1
10 dumbbell snatches
15 burpee box jump-overs
20 dumbbell snatches
15 burpee box jump-overs
30 dumbbell snatches
15 burpee box jump-overs
40 dumbbell snatches
15 burpee box jump-overs
50 dumbbell snatches
15 burpee box jump-overs

- Men use 1 x 50-lb. dumbbell and 24-in. box
- Women use 35-lb. dumbbell and 20-in. box
- Snatch, dumbbell ground to overhead fist
- burpee box jump-overs.  bodyweight ground to waist + box height


## 2018 Crossfit Open

### 18.1
8 toes-to-bars
10 dumbbell hang clean and jerks
14-cal. row

Men use 1 x 50-lb. dumbbell/Women 1 x 35-lb dumbbell
Distance, middle of chest (sternum) to top of overhead fist


4.  [5] For the affiliate you identified in Homework 1 (one of the top 10 affiliates by number of athletes who competed in both 2017 and 2018 in the region that represents where you were born) For each athlete,

    i. Calculate the average power over time for each workout for each athlete.
    ii. Use a boxplot to plot the distribution of average power for each workout.
    iii. Use a boxplot to plot the distribution in ranks for each workout
    iv.  Compare the plots in (ii) and (iii)

