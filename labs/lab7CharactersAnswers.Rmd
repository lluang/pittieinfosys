---
title: 'Lab 7: Character Strings'
author: "IE 0015 Information Systems"
date: "February 20-21, 2020"
output:
  html_document: default
  pdf_document: default
  word_document: default
---

```{r loadtitanic}
library(dplyr)
library(tidyr)
library(magrittr)
library(stringr)
titanic <- read.csv("../data/titanic3.csv")
```
1.  (3 pts) The Titanic accident was in a time when people were identified by their titles. In the Titanic data, How do you identify the title (Mr., Mrs., Miss. etc) of a person? Draw a process map for this procedure.

Hint: open the Titanic csv file in R Studio and tell someone else exactly how to identify the title without pointing to the file.

**ANSWER**

Look in the name field, find the comma after the last name.
The title starts two spaces after the comma.
The title is completed with a period.

2.  (5 pts) Read in the titanic data and extract the title of each person.  Make a list of unique titles.  

Note 1: Look in lecture Rmd file
Note 2: How do you find the first letter? how do you know the title is complete? Note: The Countess is a special case, don't worry about getting her territory right, just her title.  
Note 3:  in a regular expression, you need to escape the punctuation with a backslash, and you need to escape the backslash with another backslash (i.e. two backslashes before a punctuation mark.)
Note 4:  to apply a function to a vector (e.g. a column in a dataframe) use `sapply`, e.g. `sapply(dataframe$column, FUN=sqrt)`  
  
**ANSWER**

```{r}
getTitle <- function(name) {
  titlelocation = str_locate(name, ", [A-Z][a-z]*\\.")
  title = str_sub(name, titlelocation[1]+2, titlelocation[2])
  return (title)
}
titanic$Title <- sapply(titanic$name, FUN=getTitle)
unique(titanic$Title)  
```

3.  (2 pts) How many passengers have each title? (hint: declare the list of titles to be a factor and take the summary)

**ANSWER**
```{r}
titanic %>% group_by(Title) %>% summarize(count=n())
```

Alternative

```{r}
titanic$Title <- factor(titanic$Title)
summary(titanic$Title)
```
